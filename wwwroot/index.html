<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Contact The Jeff</title>
    <!--WILL THIS FIX THE INCORRECT ROUTING W/ PARAMETERS?-->
    <base href="/app" />
    <!--SRC: https://stackoverflow.com/questions/68928337/blazor-webassembly-route-messes-up-navlink-->

    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="css/color_themes.css" rel="stylesheet" />
    <link href="BlazoredPortfolio.styles.css" rel="stylesheet" />

    <!--////////////////////////////////////////////////////////-->
    <!--NOW YOU'LL SEE MY FACE WITHIN EVERY TAB-->
    <link rel="icon" href="/images/landing/favicon.ico">
    <!--////////////////////////////////////////////////////////-->
    <!--<link rel="stylesheet" href="css/fontawesome/css/all.min.css" />-->
    <script src="https://kit.fontawesome.com/d141bc10e1.js" crossorigin="anonymous"></script>
    <link href="css/fontawsome/fontawesome.min.css" rel="stylesheet" />

    <!--////////////////////////////////////////////////////////-->
    <!-- Script for Contact Form requires jQuery and jquery-form plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js" integrity="sha256-2Pjr1OlpZMY6qesJM68t2v39t+lMLvxwpa8QlRjJroA=" crossorigin="anonymous"></script>
</head>

<body>

    <div id="app" class="light_body" style="height:100vh;">
        <!--EMPTY NAV BAR SO USER SEES SOME LAYOUT BEFORE THE APP FINISHES BEING BUILT-->
        <!--NOTE: BS Navbar needs navbar-dark class, otherwise, the toggle button won't show up on smaller screens.-->
        <!--<nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark border-bottom box-shadow mb-3 fixed-top">-->
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark dark_nav" ) box-shadow mb-3 fixed-top">
            <div class="container ml-0">
                <a class="navbar-brand text-light" style="visibility:hidden;" asp-area="" asp-page="/Index">Top Menu</a>
            </div>
        </nav>

        <!--PROTOTYPE BOOTSTRAP SPINNER SECTION-->
        <!--TODO: CHANGE THIS UP TO CONTAIN FUN FACTS FOR 'SLOWER' DEVICES-->
        <div class="col-md-11 mx-auto" style="padding-top:20vh; padding-bottom:20vh;">

            <!--'CARD' INTRO TEXT SECTION-->
            <div class="col-md-5 mx-auto px-0 light_general_text outline-light-border r-b-corner-light-shadow">
                <!--CARD TITLE SECTION-->
                <div class="row mx-auto">
                    <p class="col-md mx-auto text-center mb-0 py-2 card-title-light-style">
                        Currently Loading Web App
                    </p>
                </div>

                <!--CARD OVERALL SECTION-->
                <div class="row mx-auto card-body-light-style">
                    <p class="mx-auto text-center mb-0 p-2">
                        Load Speed is dependent on device's resources...
                    </p>
                </div>
                <div class="row mx-auto card-body-light-style text-center py-3">
                    <div class="mx-auto spinner-border text-success" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>

                <!--CARD FOOTER SECTION-->
                <div class="row mx-auto card-footer-light-style">
                    <p class="col-md mx-auto text-center mb-0 py-2">
                        &nbsp; &nbsp; &nbsp;
                    </p>
                </div>
            </div>



    <!--<div id="app">Loading...</div>-->
    <!--<div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>-->
    <!--<script src="_framework/blazor.webassembly.js"></script>-->
    
    <script>
        //01-26-22 TODO: WILL NEED TO WORK ON THIS TO DETECT MOBILE PHONES - 
        //Note that my phone, moto g6 play w/ 3gb ram takes about 10 seconds to load my blazor wasm....
        var Html2BlazorDelay = 0000;
        var memory = 0;
        //device - memory
        try {
            memory = navigator.deviceMemory;
            //Should return one of the following in GiB:
            //0.25, 0.5, 1, 2, 4, 8.
            if (memory != undefined) {
                console.log("This device has at least " + memory + "GiB of RAM.");
            } else {
                console.log("User is either using Firefox or other unsupported browser...");
                //If this is the case, should I just default to 3 second delay and then if passed
            }
            
        } catch (err){
            console.log("This device barely has any ram and/or something went horribly wrong....");
            console.log("The error is the following: \n" + err);
        }
        /////////
        //UPDATE: I should probably add a check for if this page somehow failed to load within x seconds or something else,
        //show a section that tells user to manually reload the page...



                /*
         Gib    Seconds (delay)
         8gb    = 3 
         4gb    = 2
         2gb    = 0
         1gb    = 0
         0.5gb  = 0
         0.25gb = 0 
         */

        if (memory >= 4) { };

        console.log("I'll add the blazor.web.js in about: " + Html2BlazorDelay + " seconds!");
        var time_0 = performance.now();
        
        setTimeout(function () {
            //var script = document.createElement('script');
            //script.type = 'text/javascript';

            //script.src = '_framework/blazor.webassembly.js';
            // document.body.appendChild(script);
            //console.time("Ive added the blazor.web.js in about: ");
            //console.log("I've added the blazor.web.js in about: " + Html2BlazorDelay + " seconds!");
            $('<script src="_framework/blazor.webassembly.js"><\/script>').appendTo(document.body);
            var time_1 = performance.now();
            console.log("The loading of blazor.wasm.js took: " + ((time_1 - time_0) * 0.001).toFixed(3) + " seconds");
            //console.timeEnd("Ive added the blazor.web.js in about: ");
            //^NOTE THAT THIS WAS NOT THE ORIGINAL ATTEMPT TO 'DELAY' THE SCRIPT.
            //Accidently deleted the original attempt by undoing pending changes.

            //The original attempt was something like so
            //document.getElementsByTagName("body")[0] += "<script src='_framework/blazor.webassembly.js'><\/script>";
            //But I can't seem to find out the exact why I originaly did this...


        }, Html2BlazorDelay);

        //setInterval(function () { alert("Hello") }, 3000);
    </script>

    <!--SINCE BLAZOR DOESN'T CHANGE HTML COLORS DIRECTLY, I'LL HAVE TO RESORT TO THIS WAY...-->
    <!--SRC:https://stackoverflow.com/a/58281171 -->
    <!--<script>
        window.applyStyleForBody = function (style) {
            document.documentElement.style[style.attrib] = style.value;
        }
    </script>-->

    <!--SCRIPT INTENDED TO COMMUNICATE FROM CONTACT FORM TO G SERVICE-->
    <script>
        $('#bootstrapForm').submit(function (event) {
            event.preventDefault()
            var extraData = {}
            $('#bootstrapForm').ajaxSubmit({
                data: extraData,
                dataType: 'jsonp',  // This won't really work. It's just to use a GET instead of a POST to allow cookies from different domain.
                error: function () {
                    // Submit of form should be successful but JSONP callback will fail because Google Forms
                    // does not support it, so this is handled as a failure.
                    alert('Form Submitted. Thanks.')
                    // You can also redirect the user to a custom thank-you page:
                    // window.location = 'http://www.mydomain.com/thankyoupage.html'
                }
            })
        })
    </script>
    

    <!--SCRIPT INTENDED TO CHECK FOR JS COOKIES & RECIEVE VALUE IF EXISTED-->
    <!--TODO: UPDATE THIS TO MAKE THE HTML LOADING PAGE RESPONSIVE TO BLAZOR'S COLOR THEME?-->
    <script>
        //LET THIS BECOME THE GLOBAL VARIABLE...
        //document.cookie = "";
        let InitialColorTheme = document.cookie; //Cookie("ColorThemeChoice");
        console.log(InitialColorTheme);
        CheckForJSCookies();

        function CheckForJSCookies() {
            //let InitialColorTheme = getCookie("ColorThemeChoice");
            //IF COLOR THEME COOKIE DOES EXIST...
            if (InitialColorTheme != "") {
                console.log("First load of or reloading site!");
                console.log("Found Color Theme JS Cookie!\nIt is: " + InitialColorTheme);
            } else {
                //IF COLOR THEME COOKIE DOESN'T EXIST...
                console.log("Did Not Find the JS Color Theme Cookie!\nWho ate my cookie?");
                //DEFAULT THAT COLOR THEME COOKIE TO LIGHT THEME!
                console.log("\nAyways, just made a cookie with 'Light' value as default.");
                document.cookie = "Light";
                //setCookie("ColorThemeChoice", InitialColorTheme, "Light Theme");
            }
        }
    </script>

    <script>
        //UNCHECK ALL CONTACT FORM RADIO BUTTONS
        function ClearAllContactSubjects() {
            document.querySelector('input[name="entry.784052716"]:checked').checked = false;
            //document.getElementById('other_option').attributes.value = "";
            document.getElementById('other_option').value = "";
            //document.getElementsByName('entry.784052716.other_option_response').value = "";
            //document.getElementByName('entry.784052716.other_option_response').attributes.value = "";
            document.querySelector('input[name="entry.784052716.other_option_response"]:checked').checked = false;
            console.log("Cleared all Contact Form's Subject Input Fields");
        }
    </script>

    <!--COPY URL TO CLIPBOARD TEST-->
    <script>
        function CopyURLToClipboard(tsPassedURL) {
        console.log("\nInside the Clipboard JS Function!\n");
            //HELP SRC: https://www.c-sharpcorner.com/article/understand-javascript-interop-in-blazor/
            //CHECK TO MAKE SURE PASSED STRING IS NOT NULL OR EMPTY!
            if (!!tsPassedURL) {
                console.log("Recieved Data is: " + tsPassedURL);
                navigator.clipboard.writeText(tsPassedURL);
                return true;
            }
            console.log("Uh oh...something went wrong with passing URL from Blazor Method!\n");
            return true;
        }
    </script>
            
    <!--TEST for setting javascript cookie for color theme: 01/09/2022-->
    <script>
        function JSColorCookie(tsPassedColorString) {
            let InitialColorTheme = document.cookie; //Cookie("ColorThemeChoice");
            console.log(InitialColorTheme);
            console.log("Oh hey!\nThe theme has been requested to change! Let's see about that JS cookie...");
            //IF COLOR THEME COOKIE DOES EXIST...
            if (InitialColorTheme != "") {

                console.log("Good news!\nFound Color Theme JS Cookie!\nIt is intially: " + InitialColorTheme);
                document.cookie = tsPassedColorString;
                console.log("The color theme is now: " + document.cookie);

            } else {
                //IF COLOR THEME COOKIE DOESN'T EXIST...
                console.log("Did Not Find the JS Color Theme Cookie!\nWho ate my cookie?");
                //DEFAULT THAT COLOR THEME COOKIE TO LIGHT THEME!
                console.log("\nAyways, just made a cookie with 'Light' value as default.");
                document.cookie = "Light";
                //setCookie("ColorThemeChoice", InitialColorTheme, "Light Theme");
            }
        }
    </script>

</body>

</html>
